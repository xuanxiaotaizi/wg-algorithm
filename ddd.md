<!--
 * @Author: wanggang(wanggang220713@credithc.com)
 * @Date: 2024-04-05 20:08:41
 * @LastEditors: wanggang wanggang220713@credithc.com
 * @LastEditTime: 2024-04-15 18:50:59
 * @Description: 
-->
# ddd的意义
定义业务边界和控制变化，让系统具备支持增量式开发，达到可继承的目的
ddd不是mvc等等的架构模式，而是一种指导思想，提供设计思路的思想武器

## 我建议新的中大型系统都应该用ddd的思想去构造，理解其精髓才会明白项目也是可继承的

# ddd基本概念
## 领域模型
领域规模、领域规模-子域、领域分类-（核心域、支撑域、通用域）

确定边界：这个是最难的，原则上概念相同，含义不同的划分到不同上下文，把与外部系统沟通的拆出去

防腐层：领域之间的依赖关系的接管者，依赖关系变更避免依赖的过渡影响

领域事件：业务状态变更所产生的反应，避免直接调用其他领域的方法而导致其他领域提供接口，订阅发布模式解耦

后端架构：四层、洋葱、六边形

# ddd前端后端是不同的
后端ddd主要是为了更好的拆分微服务，构建更符合业务的微服务体系
前端是没有数据库，服务器，系统环境这些的，但是多出来了界面与交互

# 实施
说到底ddd也是后端的概念，我们也应该像拆分服务一样拆分前端，利用的手段就是微前端
业务模块拆分在微前端的基础上拆分，拆分障碍就是路由，remix路由系统的分布式路由

架构采用四层架构-利用微前端来构建子应用包含业务逻辑，页面呈现，交互过程，利用领域事件带来的副作用影响其他子应用
具体包含用户界面层、应用层（交互层）、领域层（主要的业务逻辑，不考虑页面交互）、基础设施（ui组件，文件处理，国际化）

前端的分工将发生转变，分工更明确，效率更高效，每一层都有擅长的人负责

基于构建工具链将领域层做分发，跨平台、夸框架

# 领域建模
## 实体建模
meta（最小属性单元）model（由meta组成的实体）
## 服务
数据服务-dataservice设计为单例模式
事件服务
## 业务对象
业务逻辑出口

# 交互模型
pc、h5、小程序界面很大不同，但是有时候他的触发的交互逻辑是一致的

# 抽象视图
视图描述，结合构建工具链告诉构建工具pc还是app的视图


# 前端如何进行业务建模

## 业务实体
最基本的元数据，定义描述业务的对象，由多个字段组成的对象

## 业务事件
其实就是我们常说的业务，一次授信就是一个业务事件，而一次授信是谁发起的，是么时间发起的，持续多久，都发生了什么事件。还有一点是确定事件边界，识别事件本体和附带信息理解业务

## 业务逻辑
业务逻辑其实就是规则，他里面有前提和指令，一般的都是当A的时候执行B，但是前端的指令没办法固定，因为除了数据和状态的改变，我们还要做界面的响应，为了更好的复用我们必须把前提和指令分开，但是这样会出现一些问题因为前提往往是有顺序的，分开管理就会产生不确定性。所以得探索一条路高效并合理的管理前提得顺序，并绑定对应的指令

## 流程阶段

